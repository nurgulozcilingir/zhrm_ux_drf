<mvc:View controllerName="com.bmc.hcm.drf.zhcmuxdrf.controller.DocumentList"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
    xmlns:c="sap.ui.core" displayBlock="true" height="100%" busyIndicatorDelay="0">
    <f:DynamicPage id="idDocumentListPage" class="cmnCandidateListPage sapUiNoContentPadding" busy="{DocumentListRequestView>/busy}" busyIndicatorDelay="0" showFooter="true">
        <f:title>
            <f:DynamicPageTitle>
                <f:heading>
                    <FlexBox direction="Row" alignItems="Center">
                        <core:Icon src="sap-icon://nav-back" press="onNavBack" color="#346187" class="erfPageBackButtonLight sapUiSmallMarginEnd"/>
                        <Title text="{i18n>DOCUMENT_LIST}"></Title>
                    </FlexBox>
                </f:heading>
            </f:DynamicPageTitle>
        </f:title>
        <f:content>
            <IconTabBar id="idIconTabBar" select="onFilterSelect" class="sapUiResponsiveContentPadding">
                <items>
                    <IconTabFilter id="allDocuments" text="{i18n>ALL_DOCUMENTS}" key="all" icon="sap-icon://documents" count="{= ${DocumentListRequestView>/DocumentCollection}.length }">
                        <Table id="idDocumentsTable" inset="false" 
                            items="{/DocumentListSet}" 
                            noDataText="{i18n>NO_DATA}" class="erfTable">
                            <headerToolbar>
                                <Toolbar>
                                    <ToolbarSpacer/>
                                    <ComboBox items="{ path:'/ValueHelpSet' , filters : [ { path : 'Drfvh', operator : 'EQ', value1 : 'Drfbl'} ] }" selectedKey="{DocumentListRequestView>/search/Zbelt}" placeholder="Belge Türü" change="onChangeDrfst">
                                        <core:ListItem key="{Fldky}" text="{Fldvl}"/>
                                    </ComboBox>
                                    <ComboBox items="{ path:'DocumentListRequestView>/drfssList'}" placeholder="Belge Adı" selectedKey="{DocumentListRequestView>/search/Zbeln}" change="onRequestSearch">
                                        <core:ListItem key="{DocumentListRequestView>Fldky}" text="{DocumentListRequestView>Fldvl}"/>
                                    </ComboBox>
                                    <SearchField id="idRequestSearchField" placeholder="Belgeler içinde ara..." value="{DocumentListRequestView>/search/Zznot}" width="{= ${device>/system/phone} ? '30%' : '15%' }" search="onRequestSearch"></SearchField>
                                    <Button type="Emphasized" icon="sap-icon://refresh" text="{i18n>SEARCH_ACTION}" press="onRequestSearch"/>
                                </Toolbar>
                            </headerToolbar>
                            <infoToolbar>
                                <Toolbar>
                                    <Title id="tableHeader" text="{i18n>PERSONNEL_DOCUMENT_LIST}"/>
                                </Toolbar>
                            </infoToolbar>
                            <columns>
                                <Column>
                                    <Text text="{i18n>DOCUMENT_LINK}"/>
                                </Column>
                                <Column minScreenWidth="Tablet" demandPopin="true">
                                    <Text text="{i18n>PERSONNEL_NO}" />
                                </Column>
                                <Column minScreenWidth="Desktop" demandPopin="true" hAlign="Begin">
                                    <Text text="Personel Adı Soyadı" />
                                </Column>
                                <Column minScreenWidth="Desktop" demandPopin="true" hAlign="Begin">
                                    <Text text="Pozisyon" />
                                </Column>
                                <Column minScreenWidth="Desktop" demandPopin="true">
                                    <Text text="Unvan" />
                                </Column>
                                <Column minScreenWidth="Desktop" demandPopin="true">
                                    <Text text="Organizasyon birimi" />
                                </Column>
                                <Column minScreenWidth="Desktop" demandPopin="true">
                                    <Text text="{i18n>DOCUMENT_TYPE}" />
                                </Column>
                                <Column minScreenWidth="Desktop" demandPopin="true">
                                    <Text text="{i18n>DOCUMENT_NAME}" />
                                </Column>
                                <Column minScreenWidth="Desktop" demandPopin="true">
                                    <Text text="{i18n>DOCUMENT_NO}" />
                                </Column>
                                <Column minScreenWidth="Desktop" demandPopin="true">
                                    <Text text="{i18n>INSTITUTE_NAME}" />
                                </Column>
                                <Column minScreenWidth="Desktop" demandPopin="true">
                                    <Text text="{i18n>DOCUMENT_DATE}" />
                                </Column>
                                <Column minScreenWidth="Desktop" demandPopin="true">
                                    <Text text="{i18n>EXPIRY_DATE}" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem vAlign="Middle" type="Navigation" press="onItemPress">
                                    <cells>
                                        <Link press="onAttachDownloadDoc" text="{Aname}"/>
                                        <ObjectIdentifier title="{Pernr}" />
                                        <Text text="{Ename}"/>
                                        <Text text="{= ${Nopln} ? ${Plaft} : ${Plstx} }" />
                                        <Text text="{Stltx}"/>
                                        <Text text="{Orgtx}"/>
                                        <Text text="{Zbltx}" />
                                        <Text text="{Zblnx}" />
                                        <Text text="{Zblno}" />
                                        <Text text="{Zkurm}" />
                                        <Text text="{ path: 'Ztarh', type: 'sap.ui.model.type.Date', formatOptions: { pattern:'dd.MM.yyyy'} }" />
                                        <Text  text="{path: 'Zgecr', type: 'sap.ui.model.type.Date', formatOptions: { pattern:'dd.MM.yyyy'} }" />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </f:content>
    </f:DynamicPage>
</mvc:View>