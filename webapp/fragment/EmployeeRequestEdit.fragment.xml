<core:FragmentDefinition xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:cd="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
    <VBox class="sapUiNoContentPaddings">
        <f:Form editable="{= !${employeeRequestView>/applicationSettings/DisplayMode}}" id="idEmployeeRequestForm2">
            <f:layout>
                <f:ResponsiveGridLayout labelSpanXL="3" labelSpanL="3" labelSpanM="3" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="4" emptySpanL="4" emptySpanM="2" emptySpanS="0" columnsXL="1" columnsL="1" columnsM="1" singleContainerFullSize="false"/>
            </f:layout>
            <f:formContainers>
                <f:FormContainer title="{i18n>REQUEST_DETAILS}">
                    <f:formElements>
                        <f:FormElement label="{i18n>REQUEST_REASON}">
                            <f:fields>
                                <ComboBox selectedKey="{path: 'employeeRequestView>/request/Drfrt'}" required="true" items="{ path:'/ValueHelpSet' , filters:[{path: 'Drfvh' , operator : 'EQ' , value1 : 'Drfrt' } ] }" change="onReasonChanged" editable="{= !${employeeRequestView>/applicationSettings/DisplayMode}}">
                                    <core:Item key="{Fldky}" text="{Fldvl}"/>
                                </ComboBox>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>DOCUMENT_TYPE}">
                            <f:fields>
                                <ComboBox selectedKey="{employeeRequestView>/request/Drfbl}" required="true" items="{ path:'/ValueHelpSet', filters : [ { path : 'Drfvh', operator : 'EQ', value1 : 'Drfbl'} ] }" change="onValueHelpSetNameComboBoxChange" editable="{= !${employeeRequestView>/applicationSettings/DisplayMode}}">
                                    <core:ListItem additionalText="{Selky}" key="{Fldky}" text="{Fldvl}"/>
                                </ComboBox>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>DOCUMENT_NAME}">
                            <f:fields>
                                <ComboBox id="idDocumentNameComboBox" selectedKey="{employeeRequestView>/request/Drfbn}" required="true" items="{ path:'/ValueHelpSet', filters : [ { path : 'Drfvh', operator : 'EQ', value1 : 'Drfbn'} ] }" editable="{= !${employeeRequestView>/applicationSettings/DisplayMode}}">
                                    <core:ListItem additionalText="{Selky}" key="{Fldky}" text="{Fldvl}"/>
                                </ComboBox>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>EMPLOYEE_SELECT}">
                            <f:fields>
                                <Input value="{employeeRequestView>/request/Drfvh}" showValueHelp="{= !${employeeRequestView>/applicationSettings/DisplayMode}}" valueHelpRequest="onDrfvhInputValueHelpRequest" placeholder="{i18n>SELECT_OPTION}" editable="{= !${employeeRequestView>/applicationSettings/DisplayMode}}" />
                            </f:fields>
                        </f:FormElement>
                    </f:formElements>
                </f:FormContainer>
            </f:formContainers>
        </f:Form>
        <Table id="idEmployeeRequestChangeTable" class="erfTable centeredTable" items="{path: 'employeeRequestView>/dataList/DocumentRequestEmployeeSet', templateShareable: false}" noDataText="{i18n>NO_DATA_FOUND}" busyIndicatorDelay="0" growing="true" growingScrollToLoad="true" inset="false" width="95%">
            <headerToolbar>
                <Toolbar>
                    <ToolbarSpacer/>
                    <!-- <SearchField id="employeeSearchField" tooltip="{i18n>SEARCH_ACTION_TOOLTIP}" search="onSearch" width="{= ${device>/system/phone} ? '100%' : '50%' }"></SearchField> -->
                </Toolbar>
            </headerToolbar>
            <infoToolbar>
                <Toolbar>
                    <Title id="idEmployeeRequestTableHeader" text="{i18n>PERSONNEL_LIST}"/>
                </Toolbar>
            </infoToolbar>
            <columns>
                <Column id="idEmployeeNameColumn">
                    <Text text=""/>
                </Column>
                <Column id="idEmployeePositionColumn">
                    <Text text="{i18n>PERSONNEL_NO}"/>
                </Column>
                <Column id="idEmployeePositionColumn2">
                    <Text text="{i18n>PERSONNEL_NAME_COL}"/>
                </Column>
                <Column visible="{= ${employeeRequestView>/request/Drfrt} === '02'}">
                    <Text text="{i18n>RENEWAL_REQUEST}"/>
                </Column>
                <Column visible="{= ${employeeRequestView>/request/Drfrt} === '02'}">
                    <Text text="{i18n>RENEWAL_REASON_COLUMN}"/>
                </Column>
                <Column visible="{= ${employeeRequestView>/request/Drfrt} === '01'}">
                    <Text text="{i18n>REQUEST_REASON_COL}"/>
                </Column>
                <!-- <Column>
                    <Text text="Sil"/>
                </Column> -->
                <Column id="idEmployeeActionColumn">
                    <Text text="{i18n>ACTIONS_COL}"/>
                </Column>

            </columns>
            <items>
                <ColumnListItem type="Navigation" press="onRequestDetail">
                    <cells>
                        <!-- <Text text="{employeeRequestView>Drfid}"/> -->
                        <Image src="/sap/opu/odata/sap/ZHCM_GENERIC_SRV/EmployeeSearchSet('{employeeRequestView>Pernr}')/$value" class="erfProfileImage" width="50px"/>
                        <Text text="{employeeRequestView>Pernr}"/>
                        <Text text="{employeeRequestView>Ename}"/>
                        <!-- <Text text="{employeeRequestView>Rentx}"/> -->
                        <MenuButton text="{ path: 'employeeRequestView>Renwl', formatter: '.formatRenewalText' }" >
                            <menu>
                                <Menu itemSelected="onMenuActionsChange" >
                                    <MenuItem text="{i18n>YES_OPTION}" icon="sap-icon://accept" press="onYesMenuItemChangePress" enabled="{= !${employeeRequestView>/applicationSettings/DisplayMode}}"/>
                                    <MenuItem text="{i18n>NO_OPTION}" icon="sap-icon://decline" press="onNopeMenuItemChangePress" enabled="{= !${employeeRequestView>/applicationSettings/DisplayMode}}"/>
                                </Menu>
                            </menu>
                        </MenuButton>
                        <Input value="{employeeRequestView>Rendc}" enabled="{parts: ['employeeRequestView>/applicationSettings/DisplayMode', 'employeeRequestView>Renwl'], formatter: '.formatRendcEnabled'}" width="170px"/>
                        <!-- <Text text="{employeeRequestView>Drfrx}"/> -->
                        <ComboBox selectedKey="{employeeRequestView>Drfrs}" required="true" items="{ path:'/ValueHelpSet' , filters:[{path: 'Drfvh' , operator : 'EQ' , value1 : 'Drfrs' } ] }" change="onDrfrsComboBoxChange" editable="{= !${employeeRequestView>/applicationSettings/DisplayMode}}">
                            <core:Item key="{Fldky}" text="{Fldvl}"/>
                        </ComboBox>
                        <!-- <Button icon="sap-icon://delete" type="Reject" press="onRemoveSelectedChangeEmployee" tooltip="{i18n>REMOVE_PERSONNEL}" cd:employeeId="{employeeRequestView>Pernr}" cd:employeeName="{employeeRequestView>Ename}"/> -->
                        <Button icon="sap-icon://menu" type="Accept" press="onShowRequestActions" tooltip="{i18n>ACTION_LIST}" class="erfActionButton" enabled="{= !${employeeRequestView>/applicationSettings/DisplayMode}}"></Button>
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
    </VBox>
</core:FragmentDefinition>