<core:FragmentDefinition xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:cd="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
    <VBox class="sapUiNoContentPadding">
        <f:Form editable="true" id="idEmployeeRequestForm">
            <f:layout>
                <f:ResponsiveGridLayout labelSpanXL="3" labelSpanL="3" labelSpanM="3" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="4" emptySpanL="4" emptySpanM="2" emptySpanS="0" columnsXL="1" columnsL="1" columnsM="1" singleContainerFullSize="false"/>
            </f:layout>
            <f:formContainers>
                <f:FormContainer title="{i18n>REQUEST_DETAILS}">
                    <f:formElements>
                        <f:FormElement label="{i18n>REQUEST_REASON}">
                            <f:fields>
                                <ComboBox selectedKey="{path: 'employeeRequestView>/request/Drfrt'}" required="true" items="{ path:'/ValueHelpSet' , filters:[{path: 'Drfvh' , operator : 'EQ' , value1 : 'Drfrt' } ] }" change="onValueHelpSetComboBoxChange">
                                    <core:Item key="{Fldky}" text="{Fldvl}"/>
                                </ComboBox>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>DOCUMENT_TYPE}">
                            <f:fields>
                                <ComboBox selectedKey="{employeeRequestView>/request/Drfbl}" required="true" items="{ path:'/ValueHelpSet', filters : [ { path : 'Drfvh', operator : 'EQ', value1 : 'Drfbl'} ] }" change="onValueHelpSetNameComboBoxChange">
                                    <core:ListItem additionalText="{Selky}" key="{Fldky}" text="{Fldvl}"/>
                                </ComboBox>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>DOCUMENT_NAME}">
                            <f:fields>
                               <ComboBox id="idDocumentNameComboBox" selectedKey="{employeeRequestView>/request/Drfbn}" required="true" items="{ path:'/ValueHelpSet', filters : [ { path : 'Drfvh', operator : 'EQ', value1 : 'Drfbn'} ] }">
                                    <core:ListItem additionalText="{Selky}" key="{Fldky}" text="{Fldvl}"/>
                                </ComboBox>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>EMPLOYEE_NAME}">
                            <f:fields>
                                <Input value="{employeeRequestView>/request/Drfvh}" showValueHelp="true" valueHelpRequest="onEmployeeSearchValueHelpRequest" placeholder="{i18n>SELECT_PERSONNEL}" />
                            </f:fields>
                        </f:FormElement>
                    </f:formElements>
                </f:FormContainer>
            </f:formContainers>
        </f:Form>

        <!-- SeÃ§ilen Personeller Tablosu -->
        <Panel headerText="{i18n>SELECTED_PERSONNEL} ({employeeRequestView>/selectedEmployees/length})" class="sapUiResponsiveMargin" expandable="true" expanded="true" width="95%">
            <Table id="idEmployeeRequestTableChanges" class="erfTable centeredTable" items="{employeeRequestView>/selectedEmployees}" noDataText="{i18n>NO_PERSONNEL_SELECTED}" busyIndicatorDelay="0" growing="true" growingScrollToLoad="true" inset="false">
                <infoToolbar>
                    <Toolbar>
                        <Title id="tableHeader" text="{i18n>SELECTED_PERSONNEL_LIST}"/>
                    </Toolbar>
                </infoToolbar>
                <columns>
                    <!-- <Column>
                        <Text text="Personel"/>
                    </Column> -->
                    <Column>
                        <Text text="{i18n>PERSONNEL_NO}"/>
                    </Column>
                    <Column>
                        <Text text="{i18n>PERSONNEL_NAME_COL}"/>
                    </Column>
                    <Column visible="{= ${employeeRequestView>/request/Drfrt} === '02'}">
                        <Text text="{i18n>RENEWAL_REQUEST}"/>
                    </Column>
                    <Column visible="{= ${employeeRequestView>/request/Drfrt} === '01'}">
                        <Text text="{i18n>REQUEST_REASON_COL}"/>
                    </Column>
                    <Column width="100px">
                        <Text text="{i18n>ACTIONS_COL}"/>
                    </Column>
                </columns>
                <items>
                    <ColumnListItem>
                        <cells>
                            <!-- <Image src="/sap/opu/odata/sap/ZHCM_GENERIC_SRV/EmployeeSearchSet('{employeeRequestView>Rqowp}')/$value" class="erfProfileImage"
                                width="40px"/> -->
                            <Text text="{employeeRequestView>Pernr}"/>
                            <Text text="{employeeRequestView>Ename}"/>
                                <MenuButton text="{ path: 'employeeRequestView>Renwl', formatter: '.formatRenewalText' }">
                                    <menu>
                                        <Menu itemSelected="onMenuAction">
                                            <MenuItem text="{i18n>YES_OPTION}" icon="sap-icon://accept" press="onYesMenuItemPress"/>
                                            <MenuItem text="{i18n>NO_OPTION}" icon="sap-icon://decline" press="onNopeMenuItemPress" />
                                        </Menu>
                                    </menu>
                                </MenuButton>
                                <ComboBox selectedKey="{employeeRequestView>Drfrs}" required="true" items="{ path:'/ValueHelpSet' , filters:[{path: 'Drfvh' , operator : 'EQ' , value1 : 'Drfrs' } ] }" change="onDrfrsComboBoxChange">
                                    <core:Item key="{Fldky}" text="{Fldvl}"/>
                                </ComboBox>
                            <Button icon="sap-icon://delete" type="Reject" press="onRemoveSelectedEmployee" tooltip="{i18n>REMOVE_PERSONNEL}" cd:employeeId="{employeeRequestView>Pernr}" cd:employeeName="{employeeRequestView>Ename}"/>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </Panel>
    </VBox>
</core:FragmentDefinition>