<core:FragmentDefinition xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    xmlns:cd="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1">
    <VBox class="sapUiNoContentPadding">
        <f:Form editable="true" id="idEmployeeRequestForm">
            <f:layout>
                <f:ResponsiveGridLayout labelSpanXL="3" labelSpanL="3" labelSpanM="3" labelSpanS="12" adjustLabelSpan="false" emptySpanXL="4" emptySpanL="4" emptySpanM="2" emptySpanS="0" columnsXL="1" columnsL="1" columnsM="1" singleContainerFullSize="false"/>
            </f:layout>
            <f:formContainers>
                <f:FormContainer title="{i18n>REQUEST_DETAILS}">
                    <f:formElements>
                        <f:FormElement label="{i18n>REQUEST_REASON}">
                            <f:fields>
                                <ComboBox selectedKey="{path: 'employeeRequestView>/request/Drfrt'}" required="true" items="{ path:'/ValueHelpSet' , filters:[{path: 'Drfvh' , operator : 'EQ' , value1 : 'Drfrt' } ] }">
                                    <core:Item key="{Fldky}" text="{Fldvl}"/>
                                </ComboBox>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>DOCUMENT_TYPE}">
                            <f:fields>
                                <ComboBox selectedKey="{employeeRequestView>/request/Drfbl}" required="true" items="{ path:'/ValueHelpSet', filters : [ { path : 'Drfvh', operator : 'EQ', value1 : 'Drfbl'} ] }">
                                    <core:Item key="{Fldky}" text="{Fldvl}"/>
                                </ComboBox>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>DOCUMENT_NAME}">
                            <f:fields>
                                <Input value="{employeeRequestView>/request/Drfbn}" required="true">
                                </Input>
                            </f:fields>
                        </f:FormElement>
                        <f:FormElement label="{i18n>EMPLOYEE_NAME}">
                            <f:fields>
                                <Input value="{employeeRequestView>/request/Drfvh}" showValueHelp="true" valueHelpRequest="onEmployeeSearchValueHelpRequest" placeholder="Personel seçiniz..." />
                            </f:fields>
                        </f:FormElement>
                    </f:formElements>
                </f:FormContainer>
            </f:formContainers>
        </f:Form>
        
        <!-- Seçilen Personeller Tablosu -->
        <Panel headerText="Seçilen Personeller ({employeeRequestView>/selectedEmployees/length})" class="sapUiResponsiveMargin" expandable="true" expanded="true" width="95%">
            <Table id="idEmployeeRequestTableChanges" class="erfTable centeredTable" items="{employeeRequestView>/selectedEmployees}" noDataText="Henüz personel seçilmedi" busyIndicatorDelay="0" growing="true" growingScrollToLoad="true" inset="false">
                <headerToolbar>
                    <Toolbar>
                        <Title text="Seçilen Personeller"/>
                        <ToolbarSpacer/>
                    </Toolbar>
                </headerToolbar>
                <columns>
                    <Column>
                        <Text text="Personel No"/>
                    </Column>
                    <Column>
                        <Text text="Personel Adı"/>
                    </Column>
                    <Column width="100px">
                        <Text text="İşlemler"/>
                    </Column>
                </columns>
                <items>
                    <ColumnListItem>
                        <cells>
                            <Text text="{employeeRequestView>Pernr}"/>
                            <Text text="{employeeRequestView>Ename}"/>
                            <Button icon="sap-icon://delete" type="Reject" press="onRemoveSelectedEmployee" tooltip="Personeli Kaldır" 
                                    cd:employeeId="{employeeRequestView>Pernr}" cd:employeeName="{employeeRequestView>Ename}"/>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </Panel>
    </VBox>
</core:FragmentDefinition>